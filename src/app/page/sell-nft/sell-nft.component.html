<div class="surface-100">
  <app-base-box class="py-2 md:py-4 px-2 md:px-0 flex justify-content-start">
    <div class="flex align-items-center cursor-pointer" (click)="location.back();">
      <i class="pi pi-angle-left text-xl"></i>
      <img
        *ngIf="productInfo.image"
        class="w-3rem h-3rem ml-2 border-round-lg"
        [src]="productInfo.image"
        [alt]="productInfo.name">
      <div class="ml-2" *ngIf="productInfo.name">
        <p class="text-600 text-sm">{{productInfo.collection?.name}}</p>
        <p class="text-900">{{productInfo.name}} #{{productInfo.id}}</p>
      </div>
    </div>
  </app-base-box>
</div>
<app-page-bg-box class="sell-nft pb-8">
  <app-base-box>
    <h2
      class="text-4xl font-bold py-4 lg:py-6 px-4 lg:px-0"
      i18n>
      待售项目列表
    </h2>
    <div class="border-round-lg w-full surface-0 px-4 gl:px-6 py-4 lg:py-6 mb-4">
      <div class="flex flex-column md:flex-row">
        <!-- 左侧列表 -->
        <div class="flex-1">
          <div class="pb-5">
            <div class="flex align-items-center pb-5">
              <div class="w-0-8 h-0-8 border-circle mr-3 bg-primary"></div>
              <h3 class="text-xl" i18n>
                类型
              </h3>
            </div>
            <div class="flex">
              <button
                (click)="onChangeSellType('fixed')"
                class="flex-1 h-5rem border-round-xl flex flex-column align-items-center justify-content-center border-1 border-300 cursor-pointer"
                [class]="sellType === 'fixed' ? 'border-primary text-primary bg-primary-50' : ''">
                <i class="iconfont icon-biaoq block text-xl" [class]="sellType === 'fixed' ? 'border-primary' : ''"></i>
                <p class="pt-2" i18n>固定价格</p>
              </button>
              <div class="w-1rem h-1rem"></div>
              <button
                (click)="onChangeSellType('float')"
                class="flex-1 h-5rem border-round-xl flex flex-column align-items-center justify-content-center border-1 border-300 cursor-pointer"
                [class]="sellType === 'float' ? 'border-primary text-primary bg-primary-50' : ''">
                <i class="iconfont icon-paimai block text-xl" [class]="sellType === 'float' ? 'border-primary' : ''"></i>
                <p class="pt-2" i18n>限时拍卖</p>
              </button>
            </div>
          </div>
          <div class="pb-5" *ngIf="selectedBuyToken.length">
            <div class="flex align-items-center pb-5 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 bg-primary"></div>
              <h3 class="text-xl flex-1" i18n>
                价格
              </h3>
              <button
                class="border-circle w-2rem h-2rem surface-0 cursor-pointer"
                pTooltip="刊登项目后，无法编辑标价和项目刊登时间。您需要取消项目刊登，并使用更新的价格和日期重新刊登项目"
                tooltipPosition="top"
                tooltipEvent="focus"
                i18n-pTooltip>
                <i class="pi pi-info text-xs border-1 border-600 border-circle p-1"></i>
              </button>
            </div>
            <div class="flex w-full">
              <p-multiSelect
                class="w-4 lg:w-6 p-inputtext-lg text-base"
                styleClass="w-full"
                [(ngModel)]="selectedBuyToken"
                (onChange)="changeBuyToken($event)"
                [options]="buyTokens"
                [showHeader]="false"
                [virtualScroll]="true"
                [virtualScrollItemSize]="46"
                [lazy]="true"
                placeholder="选择代币"
                tooltipPosition="bottom"
                optionLabel="name"
                i18n-placeholder>
                <ng-template pTemplate="selectedItems">
                  <div class="flex align-items-center" *ngFor="let item of selectedBuyToken">
                    <img
                      [src]="item.logo"
                      class="w-1rem h-1rem" />
                    <p class="pl-2">{{item.name}}</p>
                    <p *ngIf="item.token" class="pl-2 text-sm text-600">({{item.token|centerSlice}})</p>
                  </div>
                </ng-template>
                <ng-template let-item pTemplate="item">
                  <div class="flex align-items-center">
                    <img
                      [src]="item.logo"
                      class="w-1rem h-1rem" />
                    <p class="pl-2">{{item.name}}</p>
                    <p *ngIf="item.token" class="pl-2 text-sm text-600">({{item.token|centerSlice}})</p>
                  </div>
                </ng-template>
              </p-multiSelect>
              <div class="w-1rem h-1rem"></div>
              <p-inputNumber
                class="flex-1"
                styleClass="w-full"
                mode="decimal"
                [maxFractionDigits]="selectedBuyToken[0].minLen"
                [min]="0"
                placeholder="金额"
                i18n-placeholder
                [(ngModel)]="startPrice"></p-inputNumber>
            </div>
          </div>
          <div class="pb-5">
            <div class="flex align-items-center pb-5 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 bg-primary"></div>
              <h3 class="text-xl flex-1" i18n>
                持续时间
              </h3>
            </div>
            <div class="flex w-full">
              <p-multiSelect
                class="w-full"
                styleClass="w-full"
                [(ngModel)]="sellTimeLine"
                (onChange)="changeSellTimeLine($event)"
                [options]="dayList"
                [showHeader]="false"
                placeholder="持续时间"
                tooltipPosition="bottom"
                optionLabel="name"
                i18n-placeholder>
                <ng-template let-value pTemplate="selectedItems">
                  <div class="country-item country-item-value" *ngFor="let option of sellTimeLine">
                    <i class="pi pi-calendar-minus pr-2"></i>{{option.name}}
                  </div>
                  <div *ngIf="!sellTimeLine || sellTimeLine.length === 0" class="country-placeholder" i18n>
                    <i class="pi pi-calendar-minus pr-2"></i>持续时间
                  </div>
                </ng-template>
              </p-multiSelect>
            </div>
          </div>
          <!-- <div class="pb-5" *ngIf="sellType === 'fixed'">
            <div class="flex align-items-center pb-5 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 surface-300"></div>
              <h3 class="text-xl flex-1" i18n>
                捆绑销售
              </h3>
              <p-inputSwitch [(ngModel)]="bundleSale"></p-inputSwitch>
            </div>
            <div class="w-full" *ngIf="bundleSale">
              <input
                class="w-full p-inputtext-lg text-base"
                type="text"
                pInputText
                placeholder="捆绑销售名称"
                i18n-placeholder />
              <input
                class="w-full mt-3 p-inputtext-lg text-base"
                type="text"
                pInputText
                placeholder="捆绑销售描述"
                i18n-placeholder />
            </div>
          </div> -->
          <div class="pb-5" *ngIf="sellType === 'fixed'">
            <div class="flex align-items-center pb-2 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 surface-300"></div>
              <h3 class="text-xl flex-1" i18n>
                为特定买家预留
              </h3>
              <p-inputSwitch [(ngModel)]="designatedBuyer"></p-inputSwitch>
            </div>
            <p class="pb-5 text-500 text-xs" *ngIf="designatedBuyer" i18n>此项目在刊登后可立即购买</p>
            <div class="flex w-full" *ngIf="designatedBuyer">
              <input
                class="w-full p-inputtext-lg text-base"
                type="text"
                [(ngModel)]="fixedBuyer"
                pInputText
                placeholder="买家地址"
                i18n-placeholder />
            </div>
          </div>
          <div class="pb-5" *ngIf="sellType === 'fixed'">
            <div class="flex align-items-center pb-5 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 bg-primary"></div>
              <h3 class="text-xl flex-1" i18n>
                出售数量
                <span class="text-sm">（最多: {{productInfo.myNum}}）</span>
              </h3>
            </div>
            <div class="flex w-full">
              <p-inputNumber
                class="w-full text-base p-0"
                styleClass="w-full"
                pInputText
                [max]="productInfo.myNum||0"
                [min]="1"
                [(ngModel)]="sellNumber"
                [placeholder]="'<=' + productInfo.myNum">
              </p-inputNumber>
            </div>
          </div>
          <div class="pb-5">
            <div class="flex align-items-center pb-4 w-full">
              <div class="w-0-8 h-0-8 border-circle mr-3 surface-300"></div>
              <h3 class="text-xl flex-1" i18n>
                费用
              </h3>
              <button
                class="border-circle w-2rem h-2rem surface-0 cursor-pointer"
                pTooltip="项目刊登是免费的。一旦出售将扣除以下费用"
                tooltipPosition="top"
                tooltipEvent="focus"
                i18n-pTooltip>
                <i class="pi pi-info text-xs border-1 border-600 border-circle p-1"></i>
              </button>
            </div>
            <div class="w-full">
              <div class="flex justify-content-between">
                <p class="text-700" i18n>服务费</p>
                <p>{{productInfo.systemRate}}</p>
              </div>
              <div class="flex justify-content-between pt-2">
                <p class="text-700" i18n>创作者 费用</p>
                <p>{{productInfo.incomeRate}}</p>
              </div>
            </div>
          </div>
        </div>
        <div class="h-1rem w-2rem"></div>
        <!-- 右侧预览 -->
        <div class="pb-5 w-full md:w-auto">
          <div class="flex align-items-center pb-5">
            <div class="w-0-8 h-0-8 border-circle mr-3 bg-primary"></div>
            <h3 class="text-xl" i18n>
              预览
            </h3>
          </div>
          <div class="surface-900 p-3 border-round-xl">
            <div class="preview-image-box">
              <img
                *ngIf="productInfo.image"
                class="border-round-xl preview-image"
                [src]="productInfo.image"
                [alt]="productInfo.name">
            </div>
            <div class="flex pb-4 pt-3 justify-content-between">
              <div>
                <p class="text-400 text-xs pb-2">{{productInfo.collection?.name}}</p>
                <p class="text-0">{{productInfo.name}} #{{productInfo.id}}</p>
              </div>
              <div class="text-right">
                <p class="text-400 text-xs pb-2" i18n>价格</p>
                <p class="text-0">{{startPrice||'--'}}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!--  -->
      <button
        pButton
        (click)="onProductSell()"
        class="w-9 lg:w-6 block mt-4 lg:mx-0 mx-auto"
        label="完成项目刊登"
        type="button"></button>
    </div>
  </app-base-box>
</app-page-bg-box>
